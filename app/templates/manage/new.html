{% extends 'base.html' %}

{% block head %}
    <link rel="stylesheet" href="{{ url_for('static', filename='css/manage.css') }}">
{% endblock%}


{% block main %}

    <h2>Write a new Article</h2>

    {% if article %}
        <form method="POST" enctype="multipart/form-data" action="{{ url_for('manage.get_edit_article', article_id=article.id) }}">
    {% elif new_article %}
        <form method="POST" enctype="multipart/form-data" action="{{ url_for('manage.post_article') }}">
    {% endif %}

        {% if article %}
            <input type="hidden" name="article_id" value="{% if article %}{{ article_id }}{% endif %}">
        {% endif %}
        <div>
            <label for="icon">Icon</label>
            <input type="text" name="icon" id="icon" maxlength="30" value="{% if article %}{{ article.icon }}{% endif %}">
        </div>

        <div>
            <label for="title">Title</label>
            <input type="text" name="title" id="title" maxlength="80" value="{% if article %}{{ article.title }}{% endif %}">
        </div>

        <div>
            <label for="text">Text</label>
            <!-- <textarea name="text" id="text" maxlength="20000" rows="20" cols="40" value="{% if article %}{{ article.textÂ }}{% endif %}"></textarea> -->
            <input type="text" name="text" id="text" maxlength="20000" value="{% if article %}{{ article.text }}{% endif %}">
        </div>


        <fieldset>
            <h3>Categories</h3>
            {% for category in categories %}
            <label for="category_{{ category.id }}">{{ category.categories}}</label>
            <input type="checkbox" id="category_{{ category.id }}" name="categories" value="{{ category.id }}"
                {% if category in ticked_categories %}
                    checked
                {% endif %}><br>
            {% endfor %}

        </fieldset>

        <fieldset>
            <h3>Title image</h3>

            <div>
                <input type="file" id="article_image" name="article_image" accept=".png, .jpg, .jpeg, .gif, .svg" max-file-size="4 * 1024 * 1024">
            </div>

            <div>
                <label for="image_name">Image name</label>
                <input type="" name="image_name" id="image_name" maxlength="30" value="{% if article %}{{ article.image_name }}{% endif %}">
            </div>
            
            <div>
                <label for="image_alt">Image alternative description</label>
                <input type="text" name="image_alt" id="image_alt" maxlength="80" value="{% if article %}{{ article.image_alt }}{% endif %}">
            </div>
        </fieldset>

        <input type="submit" value="Post Article">
    </form>

    {% if error %}
        <p style="color: red;">{{ error }}</p>
    {% endif %}

{% endblock %}